---
title: "第6章：push / pull / clone を完全に理解する"
slug: "clasp-gas-beginner-ch06-jp"
status: "publish"
date: "2025-12-12T14:45:45.577Z"
categories: 
  - "Clasp-AI入門"
  - "Tech"
tags: 
  - "GAS"
  - "Clasp"
  - "Beginner"
  - "Automation"
  - "Git"
featured_image: "../../images/clasp-ai-gas-thumb.png"
parent: "clasp-gas-beginner-intro-jp"
---

**この章でできるようになること**：
*   `clasp pull` でクラウドの変更を取り込む
*   「先祖返り」事故を防ぐための鉄則
*   チーム開発の第一歩
*   **かかる時間**：10分（読むだけ）
*   **つまずきやすい所**：ブラウザで編集してしまってデータが消える（あるあるです）

`clasp push`と`clasp pull`の違い、そして既存のプロジェクトをコピーする`clasp clone`について解説します。これらを理解すれば、どんな状況でも自在にコードを同期できるようになります。

## 1. データの流れをイメージしよう

Claspを使う上で、一番怖いのが「ファイルの先祖返り（上書き事故）」です。
これを防ぐために、データがどう動くかをしっかりイメージしましょう。

### Push (プッシュ)
- **方向**: あなたのPC ➡ Google
- **意味**: 「私の手元のコードが最新です。これで上書きしてください」
- **コマンド**: `clasp push`

### Pull (プル)
- **方向**: Google ➡ あなたのPC
- **意味**: 「Googleにあるコードが最新です。手元のファイルを更新してください」
- **コマンド**: `clasp pull`

## 2. 既存のプロジェクトを手元に持ってくる (Clone)

第4章では `clasp create` で新規プロジェクトを作りましたが、実務では**「すでに動いているGAS」**や**「スプレッドシートに紐付いているGAS」**を編集したいことの方が多いでしょう。

そんな時に使うのが **`clasp clone` (クローン)** です。
これは、クラウド上のGASプロジェクトを、丸ごと自分のPCにダウンロードしてくるコマンドです。

### どんな時に使う？
- 昔ブラウザで作ったGASを、これからはVS Codeで本格的に管理したいとき。
- チームメンバーが作ったGASを、自分のPCにコピーして手伝いたいとき。
- PCを買い替えて、開発環境を再構築するとき。

### 手順1：Script ID（スクリプトID）を探せ！
Cloneするには、そのGASの「住所」にあたる **Script ID** が必要です。URLではありません。

1.  ブラウザで対象のGASエディタを開きます。
2.  左側のメニューから **「プロジェクトの設定」**（歯車アイコン⚙️）をクリックします。
3.  「ID」という項目にある、ランダムな長い文字列をコピーします。

### 手順2：コマンド実行
ターミナルで、プロジェクトを置きたいフォルダ（親フォルダ）に移動してから、以下を打ち込みます。

```bash
# clasp clone <コピーしたスクリプトID>
clasp clone 1A2b3C4d5E6f......
```

成功すると、現在のフォルダに新しいフォルダが作られ、その中に `.js` ファイルや `appsscript.json` がダウンロードされます。
これだけで、ローカルでの開発準備は完了です！あとは `cd` でそのフォルダに入って作業を始めましょう。

## 3. 絶対にやってはいけない「二刀流」

一番やってはいけないのが、**「ローカル（VS Code）で編集しながら、ブラウザでも編集する」** ことです。
これをやると、悲劇が起きます。

### 😱 悲劇のシナリオ
1.  **ローカル**で「機能A」を作る。
2.  `clasp push` する。（クラウドに機能Aが反映される）
3.  **ブラウザ**を開いて、ちょっとした修正（機能B）をして保存する。
4.  **ローカル**に戻って、「機能C」を作る。
    - ※このとき、ローカルには「機能B」が存在しません！
5.  `clasp push` する。

<!-- ここに「ローカルとクラウドのすれ違い」を示す図解（矢印など）を入れる -->

**結果**: ブラウザで作った「機能B」は消滅します！
Claspは「ローカルの状態を正」として、クラウドを強制的に上書きしてしまうからです。
※ちなみに、Google側のファイルが消えても「ゴミ箱」には入らないので、復旧は非常に困難です。（詳しくは第8章で）

## 4. 鉄の掟：一方通行を守る

事故を防ぐためのルールはたった一つです。

> **「コードの編集は、必ずローカル（VS Code）だけで行う」**

ブラウザのエディタは「見るだけ」「実行するだけ」にしてください。
もしブラウザでコードをいじりたくなっても、グッと我慢してVS Codeを開いてください。

### もしどうしてもブラウザで修正してしまったら？
出先でPCがなくて、スマホやブラウザから緊急修正した…なんてこともあるでしょう。
その場合は、作業を再開する前に必ず以下のコマンドを打ちます。

```bash
clasp pull
```

これで、ブラウザで行った変更をローカルに取り込むことができます。

### 【保存版】事故を起こさない運用テンプレ
不安な人は、作業を始める前に必ずこの手順を踏むようにしましょう。

1.  **作業開始前**: `clasp pull` （念のため最新状態を取得）
2.  **作業中**: VS Codeで編集・保存
3.  **作業完了**: `clasp push` （クラウドへ反映）
4.  **重大な変更前**: Gitでコミット（※第9章で解説）

「久しぶりに作業するときは、まず `pull`」
これさえ守れば、事故の9割は防げます。

## 5. 無視ファイルの設定 (.claspignore)

プロジェクトが大きくなってくると、「Googleにはアップロードしたくないファイル」が出てきます。
例えば、自分用のメモ書きや、テスト用のデータなどです。

これを実現するのが `.claspignore`（クラスプ・イグノア）というファイルです。
プロジェクトフォルダの直下に作成し、以下のように記述します。

```text
# 無視したいファイルやフォルダを書く
memo.txt
test-data/**
.git/**
node_modules/**
```

特に `node_modules` というフォルダ（ライブラリが入る場所）はファイル数が膨大なので、これをアップロードしようとするとエラーになります。
本格的な開発をする場合は、この設定が必須になります。

## 6. 便利な機能：自動プッシュ (watch)

いちいち `clasp push` と打つのが面倒くさいですか？
そんなときは、以下のコマンドを使ってみてください。

```bash
clasp push --watch
```

これを実行している間は、**「ファイルを保存（Ctrl+S）するたびに、自動でプッシュ」** してくれます。
ブラウザのエディタと同じような感覚で、保存＝反映というリズムで開発できます。
（終わるときは `Ctrl + C` で停止します）

---

## よくある質問 (Q&A)

### Q. ブラウザでちょっと直すくらいなら大丈夫ですよね？
**A. ダメです！**
「1文字だけだから…」という油断が事故の元です。
ブラウザで修正して保存した瞬間に、ローカルのコードと「矛盾」が生じます。
その後にローカルから `clasp push` すると、ブラウザでの修正は無慈悲に上書きされて消えます。
**「修正は必ずVS Codeで」** を徹底してください。

### Q. `clasp clone` は何回もやるものですか？
**A. 基本は最初の一回だけです。**
一度ローカルに持ってくれば、あとはそのフォルダで開発を続ければOKです。
ただし、PCを変えたり、別のフォルダで作業したくなった場合は、再度 `clone` しても構いません。

---

## 理解度チェックテスト

<details>
<summary><strong>Q1. 手元のコードをGoogleにアップロードするコマンドは？</strong></summary>
答え: <code>clasp push</code>
</details>

<details>
<summary><strong>Q2. Googleにあるコードを手元にダウンロードするコマンドは？</strong></summary>
答え: <code>clasp pull</code>
</details>

<details>
<summary><strong>Q3. 既存のGASプロジェクトを丸ごとコピーしてくるコマンドは？</strong></summary>
答え: <code>clasp clone</code>
</details>

---

ここまでで、Claspの基本的な使い方はマスターしました。
次章からは、少し視点を変えて「実際の業務でどう使うか」という実践的な話をします。

---
**次章でやること**：
*   「毎朝9時に売上を集計してSlackに通知する」ロボットを設計する
*   具体的なコードの書き方（設計図）
*   実務で使うときの注意点

[＞＞ 次の章：第7章 GASを「実際の業務」に使うイメージ](https://www.zidooka.com/archives/1610)

## 連載目次

- [【固定記事】完全初心者のための Clasp × GAS 完全入門（ZIDOOKA！）](https://www.zidooka.com/archives/1568)
- [第0章：そもそもGASとClaspって何？](https://www.zidooka.com/archives/1562)
- [第1章：Claspを使う前に知っておく最低限のこと](https://www.zidooka.com/archives/1574)
- [第2章：Claspを使うための環境を作る](https://www.zidooka.com/archives/1580)
- [第3章：GoogleアカウントとClaspをつなぐ](https://www.zidooka.com/archives/1586)
- [第4章：最初のGASプロジェクトを作ってみる](https://www.zidooka.com/archives/1592)
- [第5章：GASのコードを書いてみる](https://www.zidooka.com/archives/1598)
- **第6章：push / pull を理解する** (Current)
- [第7章：GASを「実際の業務」に使うイメージ](https://www.zidooka.com/archives/1610)
- [第8章：初心者が必ずハマるポイント集](https://www.zidooka.com/archives/1616)
- [第9章：次にやるべきこと](https://www.zidooka.com/archives/1622)

